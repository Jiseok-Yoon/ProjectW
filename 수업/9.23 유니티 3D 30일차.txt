NPC에 대사 참조 테이블 넣기.
스트링 테이블 작성
여러 대화가 이어져서 나와야 한다면 문자 하나로 구분해서 작성하거나 해도 됨. 랜덤하게 나와야 한다거나 그럴 때 따로 하나씩 고르기 뭐하니까.
그게 아니라면 그냥 번호 다르게 해서 해도 됨.
퀘스트 대화는 번호 다르게 해서 순차적으로 나오게 할 것임.

String 엑셀도 작성하고 SD 클래스 구현.

대화창 UI 구성
텍메프 이름 구성. 서브 메시가 자동으로 생기는 경우 있음. 서브메시가 자동으로 생기는 경우는 언제인가?
서브메시는 내가 출력하려고 하는 문자열에서 내가 미리 굽지 않은 문자가 존재하면 생김.
대체하려고 원래 기본으로 가지고 있는 녀석에는 왠만한 문자가 다 있으니까 출력 못하는걸 서브메시로 출력하려고 하는 거.
메시 두개를 쓰게 되는 거가 됨.
지금 공백을 못굽는건데 추가를 시켜주면 됨. 다시구워주게. 윈도우-텍메프-폰트 애셋 크리에이터에서 맨 아래 내려가서 공백 추가해서 굽기.
그리고 구울 때 렌더 모드를 선택할 수 있음. 기본으로 스무스 힌티드 되어있는데 SDFAA_HINTED로 구우면 깔끔함. 안티앨리어싱 적용하는 것.
그리고 저장에 세이브 애즈 해서 덮어씌우면 됨. 그래야 참조가 유지됨. 아니면 지워버리게 되면 참조 다 풀림.
그리고 원래는 기본 폰트 구워서 볼드를 적용하거나 해야 맞음. 우리는 지금 볼드체 자체를 구워버렸지만.

Object에 NPC 폴더 만들고 NPC 스크립트도 만듦.
액터 받고 싶지만 BoActor에 공방 체력 이런게 다 있어가지고 좀 그럼.
NPC 같이 싸우는 퀘스트 이런거 하면 Actor 상속해도 되겠지만 지금은 그런 용도는 아니라서 모노로.

UIDialogue 랑 BoDialogue랑 작업.

StageManager 에 SpawnNPC 만들기

모델 NPC 프리팹 생성. 레이어도 추가하기 NPC 레이어.
원본 수정하고 싶지 않으면 scale만 줄이면 됨. 원본 모델을 바꾸고 싶으면 FBX파일을 보면 인스펙터에서 모델 탭에 Scale Factor 값 있는데 이건 왠만하면 안손대는거 추천.

배틀 매니저에 NPC추가. 그리고 생성한 NPC는 여기에 넣으면 됨 AddNpc 메소드 작성해서.

외부 모델 불러오고 애니메이션은 없는 상태.
애니메이션을 미리 만들어진 애니메이션 파일 가져다가 그대로 모델에 적용할 수가 있음.
그게 가능한 이유는 유니티 모델을 보면 모델 안에는 일반적으로 본이 다 잡혀있음. 실제 관절마다 뼈대가 잡혀있음
본마다 행렬 정보가 다 들어가있음. 이 정보를 가지고 다른 애니메이션 파일을 가져다가 입히면 잡혀있는 뼈대를 기반으로 애니메이션 파일을 사용할 수 있음. 그러나 사용하려면 조건이 몇가지 있음.
캐릭터 모델이 가지는 뼈대의 개수가 최소한 15개 이상은 가지고 있어야 함. 이건 엔진마다 다름.
인스펙터에서 Rig 탭을 보면 애니메이션 타입이 휴머노이드로 설정이 되어야만 다른 애니메이션 파일 사용할 수 있음.
보통은 기본값이 Legacy로 되어있음. Generic은 비인간형. 걔들한테 많이 씀. 인간형태는 제네릭으로 하는 경우도 있기는 함. 쓸 수는 있음. 왠만하면 Legacy 아니면 Generic 되어잇음.
휴머노이드는 사실상 출시하는 게임에서는 쓸 일이 없음. 자기 캐릭터에 맞게 애니메이션을 회사에서 만드니까 굳이 다른 애니메이션 파일을 입혀서 쓸 일이 없음. 다른 모델 기준으로 해서 만든 애니메이션을 입혀서 쓰는게 정보가 아무리 잘 맞아도 어색한 부분이 조금 생기기 마련임. 그래서 굳이 가져다 쓰는 경우 아니면 휴머노이드 할 이유는 없음.

외부 모델 가져다 쓸 때 이거 휴머노이드 확인하는거랑 파일 열어서 볼 때 아바타정보. 눌러보면 인스펙터에서 아바타라고 뜸. 이 아바타 정보가 있어야지만 애니메이터 가지고 컨트롤을 할 수 있음.
애니메이터에 아바타 필드가 있는데 이 정보가 있어야만 애니메이션을 받아서 정상적인 동작이 가능.
휴머노이드 애니메이션 파일 가져다가 쓰려면 기본적으로 T-pose가 되어있어야 함. 엔진마다 틀림.
언리얼은 리타겟팅이라 방식이 아예 틀림. 유니티는 T-pose 되어있어야 함.
원신도 A포즈가 되어있었음. 이걸 T-pose로 변경하려면 기능이 있음. 아바타 컨피규어 탭에서 Pose라는 탭이 있음.
이걸 누르고 Enforce T-pose 드롭다운을 누르면 알아서 T모양으로 잡힘.

그리고 옛날 게임보면 모델이 뼈라던가 이런거로 늘어나는 게 있음. 이게 Skinning이라는 기법. 우리도 피부 당기면 찢어지는게 아니라 늘어나는 것처럼 피부가 늘어나듯이 보이게 하려는 기법. 이게 왜 생겼냐면 옛날 게임 보면 초기 3D 버츄어 캅이라던가. 이런거 보면 캐릭터 모델이 각져있음. 그 모델에서 팔꿈치같은 부분. 실제 사람은 팔꿈치 접으면 바깥 부분이 알아서 피부가 늘어나지만 옛날 게임은 이 팔꿈치 접을 때 늘어나는게 아니라 버텍스가 적어서 각져서 보완하려는 기법. 그래서 본을 늘리면 쭉 늘어나게 됨.
